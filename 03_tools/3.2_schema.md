# 3.2 定义工具 Schema

工具定义是 Tool 的基础。一个好的工具定义能让 Claude 准确理解工具的用途和使用方式。

---

## Schema 结构

每个工具定义包含三个核心字段：

| 字段 | 说明 |
|------|------|
| `name` | 工具名称，唯一标识符 |
| `description` | 工具描述，告诉 Claude 何时使用 |
| `input_schema` | 参数定义，JSON Schema 格式 |

---

## 完整示例

```json
{
  "name": "search_products",
  "description": "在商品数据库中搜索产品。当用户询问商品信息、价格、库存时使用此工具。",
  "input_schema": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "搜索关键词"
      },
      "category": {
        "type": "string",
        "enum": ["电子产品", "服装", "食品", "家居"],
        "description": "商品分类（可选）"
      },
      "max_price": {
        "type": "number",
        "description": "最高价格限制（可选）"
      }
    },
    "required": ["query"]
  }
}
```

---

## 参数类型

| 类型 | 示例 |
|------|------|
| `string` | `"北京"` |
| `number` | `99.5` |
| `integer` | `10` |
| `boolean` | `true` |
| `array` | `["a", "b"]` |
| `object` | `{"key": "value"}` |
| `enum` | 限定选项列表 |

---

## 最佳实践

### 1. 描述要具体

```
❌ "获取数据"
✅ "从 MySQL 数据库查询用户订单记录，返回最近 30 天的订单"
```

### 2. 参数描述要清晰

```
❌ "id": {"type": "string"}
✅ "id": {"type": "string", "description": "用户唯一标识符，格式为 UUID"}
```

### 3. 使用 enum 限制选项

```json
"status": {
  "type": "string",
  "enum": ["pending", "processing", "completed"],
  "description": "订单状态"
}
```

### 4. 明确必填字段

```json
"required": ["user_id", "action"]
```

---

## 小结

- 工具定义决定了 Claude 如何理解和使用工具
- 描述越清晰，调用越准确
- 使用 JSON Schema 规范定义参数
