# 3.1 å·¥å…·æ¦‚è¿°ä¸Žå·¥ä½œåŽŸç†

## ä»€ä¹ˆæ˜¯å·¥å…·ï¼Ÿ

å·¥å…·ï¼ˆToolï¼‰å…è®¸ Claude æ‰©å±•å…¶èƒ½åŠ›ï¼Œä¸Žå¤–éƒ¨å‡½æ•°ã€API æˆ– Anthropic æä¾›çš„æœåŠ¡è¿›è¡Œäº¤äº’ã€‚é€šè¿‡å·¥å…·ï¼ŒClaude å¯ä»¥èŽ·å–å®žæ—¶ä¿¡æ¯ã€æ‰§è¡Œå¤æ‚è®¡ç®—æˆ–æ“ä½œç³»ç»Ÿèµ„æºã€‚

## å·¥å…·åˆ†ç±»

æ ¹æ®å·¥å…·çš„å®šä¹‰ä½ç½®å’Œæ‰§è¡Œä¸»ä½“ï¼ŒClaude çš„å·¥å…·åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

### 1. å®¢æˆ·ç«¯å·¥å…· (Client Tools)
åœ¨ä½ çš„ç³»ç»Ÿä¸­æ‰§è¡Œçš„å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
- **ç”¨æˆ·è‡ªå®šä¹‰å·¥å…·**ï¼šä½ æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆ›å»ºå’Œå®žçŽ°çš„è‡ªå®šä¹‰åŠŸèƒ½ï¼ˆæœ€å¸¸è§çš„åœºæ™¯ï¼‰ã€‚
- **Anthropic å®šä¹‰çš„å®¢æˆ·ç«¯å·¥å…·**ï¼šå¦‚ **Computer Use** (è®¡ç®—æœºä½¿ç”¨) å’Œ **Text Editor** (æ–‡æœ¬ç¼–è¾‘å™¨)ï¼Œè¿™äº›å·¥å…·ç”± Anthropic å®šä¹‰äº†æ ‡å‡†çš„ Schemaï¼Œä½†ä»éœ€è¦ä½ åœ¨å®¢æˆ·ç«¯çŽ¯å¢ƒä¸­æä¾›å…·ä½“å®žçŽ°ã€‚

**ç‰¹ç‚¹**ï¼šClaude è¾“å‡ºâ€œè°ƒç”¨æŒ‡ä»¤â€ï¼Œç”±å¼€å‘è€…çš„åº”ç”¨è´Ÿè´£æ‰§è¡Œé€»è¾‘å¹¶è¿”å›žç»“æžœã€‚

### 2. æœåŠ¡ç«¯å·¥å…· (Server Tools)
åœ¨ Anthropic æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„å·¥å…·ï¼Œä¾‹å¦‚ï¼š
- **Web Search**ï¼šè”ç½‘æœç´¢ã€‚
- **Web Fetch**ï¼šç½‘é¡µå†…å®¹æŠ“å–ã€‚
- **Code Execution**ï¼šä»£ç æ‰§è¡Œã€‚

**ç‰¹ç‚¹**ï¼šåªéœ€åœ¨ API è¯·æ±‚ä¸­å£°æ˜Žå¯ç”¨ï¼Œæ— éœ€å¼€å‘è€…ç¼–å†™æ‰§è¡Œé€»è¾‘ï¼ŒAnthropic ä¼šè‡ªåŠ¨å¤„ç†å¹¶æ•´åˆç»“æžœã€‚

---

## å·¥ä½œæµç¨‹ï¼ˆä»¥å®¢æˆ·ç«¯å·¥å…·ä¸ºä¾‹ï¼‰

![Tool å·¥ä½œæµç¨‹](_images/tool-flow.jpg)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tool å·¥ä½œæµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. å®šä¹‰å·¥å…·                                                â”‚
â”‚     å¼€å‘è€…å®šä¹‰å¯ç”¨å·¥å…·åŠå…¶å‚æ•°                              â”‚
â”‚              â†“                                              â”‚
â”‚  2. å‘é€è¯·æ±‚                                                â”‚
â”‚     ç”¨æˆ·é—®é¢˜ + å·¥å…·å®šä¹‰ â†’ Claude                            â”‚
â”‚              â†“                                              â”‚
â”‚  3. Claude å†³ç­–                                             â”‚
â”‚     Claude åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·ï¼Œè¾“å‡ºå·¥å…·è°ƒç”¨è¯·æ±‚               â”‚
â”‚              â†“                                              â”‚
â”‚  4. æ‰§è¡Œå·¥å…·                                                â”‚
â”‚     ä½ çš„åº”ç”¨æ‰§è¡Œå·¥å…·ï¼ŒèŽ·å–ç»“æžœ                              â”‚
â”‚              â†“                                              â”‚
â”‚  5. è¿”å›žç»“æžœ                                                â”‚
â”‚     å·¥å…·ç»“æžœ â†’ Claude                                       â”‚
â”‚              â†“                                              â”‚
â”‚  6. ç”Ÿæˆå›žå¤                                                â”‚
â”‚     Claude åŸºäºŽå·¥å…·ç»“æžœç”Ÿæˆæœ€ç»ˆå›žå¤                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…¸åž‹åº”ç”¨åœºæ™¯

| åœºæ™¯ | å·¥å…·ç¤ºä¾‹ |
|------|---------|
| ä¿¡æ¯æŸ¥è¯¢ | å¤©æ°” APIã€è‚¡ç¥¨ APIã€æœç´¢å¼•æ“Ž |
| æ•°æ®æ“ä½œ | æ•°æ®åº“æŸ¥è¯¢ã€æ–‡ä»¶è¯»å†™ |
| ç²¾ç¡®è®¡ç®— | è®¡ç®—å™¨ã€å•ä½è½¬æ¢ |
| å¤–éƒ¨é›†æˆ | å‘é€é‚®ä»¶ã€åˆ›å»ºæ—¥åŽ†äº‹ä»¶ |
| ç³»ç»ŸæŽ§åˆ¶ | æ‰§è¡Œå‘½ä»¤ã€ç®¡ç†æœåŠ¡ |

---

## å®šä¹‰å’Œè°ƒç”¨å·¥å…·ç¤ºä¾‹

```python
import anthropic

client = anthropic.Anthropic()

# å®šä¹‰å·¥å…·
tools = [
    {
        "name": "get_weather",
        "description": "èŽ·å–æŒ‡å®šåŸŽå¸‚çš„å½“å‰å¤©æ°”",
        "input_schema": {
            "type": "object",
            "properties": {
                "city": {
                    "type": "string",
                    "description": "åŸŽå¸‚åç§°ï¼Œå¦‚'åŒ—äº¬'"
                }
            },
            "required": ["city"]
        }
    }
]

# å‘é€è¯·æ±‚
response = client.messages.create(
    model="claude-sonnet-4-20250514",
    max_tokens=1024,
    tools=tools,
    messages=[
        {"role": "user", "content": "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€Žä¹ˆæ ·ï¼Ÿ"}
    ]
)
```

---

## è®¡è´¹ä¸Ž Token æ¶ˆè€—

ä½¿ç”¨å·¥å…·ä¼šäº§ç”Ÿé¢å¤–çš„ Token æ¶ˆè€—ï¼Œè®¡è´¹åŸºäºŽä»¥ä¸‹ä¸‰éƒ¨åˆ†ï¼š

1.  **è¾“å…¥ Token**ï¼šåŒ…æ‹¬å‘é€ç»™æ¨¡åž‹çš„æç¤ºè¯ã€**å·¥å…·å®šä¹‰**ï¼ˆåç§°ã€æè¿°ã€Schemaï¼‰ä»¥åŠåŽç»­å›žåˆä¸­çš„**å·¥å…·ç»“æžœ**ã€‚
2.  **è¾“å‡º Token**ï¼šåŒ…æ‹¬ Claude ç”Ÿæˆçš„**å·¥å…·è°ƒç”¨è¯·æ±‚**ï¼ˆ`tool_use` å—ï¼‰å’Œæœ€ç»ˆçš„æ–‡æœ¬å›žå¤ã€‚
3.  **ç³»ç»Ÿå¼€é”€**ï¼šå½“å¯ç”¨å·¥å…·æ—¶ï¼ŒAnthropic ä¼šè‡ªåŠ¨æ³¨å…¥ä¸€æ®µç‰¹æ®Šçš„ç³»ç»Ÿæç¤ºè¯ä»¥å¼•å¯¼æ¨¡åž‹ä½¿ç”¨å·¥å…·ã€‚ä¸åŒæ¨¡åž‹æ³¨å…¥çš„ Token æ•°é‡ä¸åŒï¼ˆé€šå¸¸åœ¨å‡ ç™¾ä¸ª Token å·¦å³ï¼‰ã€‚

**æ³¨æ„**ï¼šå¯¹äºŽ**æœåŠ¡ç«¯å·¥å…·**ï¼ˆå¦‚ Web Searchï¼‰ï¼Œé™¤äº† Token æ¶ˆè€—å¤–ï¼Œå¯èƒ½è¿˜ä¼šæœ‰åŸºäºŽä½¿ç”¨æ¬¡æ•°çš„é¢å¤–è´¹ç”¨ã€‚

---

## å°ç»“

- **Tool** è®© Claude èƒ½æ‰©å±•èƒ½åŠ›å¹¶è°ƒç”¨å¤–éƒ¨åŠŸèƒ½
- å¯¹äºŽ**å®¢æˆ·ç«¯å·¥å…·**ï¼ŒClaude è´Ÿè´£å†³ç­–ï¼Œå¼€å‘è€…è´Ÿè´£æ‰§è¡Œ
- å¯¹äºŽ**æœåŠ¡ç«¯å·¥å…·**ï¼ŒClaude è‡ªåŠ¨æ‰§è¡Œï¼Œå¼€å‘è€…åªéœ€å¯ç”¨
- å¼€å‘è€…å§‹ç»ˆæŽ§åˆ¶å“ªäº›å·¥å…·å¯¹ Claude å¯è§

> ðŸ“š **å®˜æ–¹æ–‡æ¡£**: [Tool use with Claude)](https://platform.claude.com/docs/en/agents-and-tools/tool-use/overview)

ä¸‹ä¸€èŠ‚å°†è¯¦ç»†è®²è§£å¦‚ä½• [å®šä¹‰å·¥å…· Schema](3.2_schema.md)ã€‚
