# 1.4 如何选择合适的模型

选择正确的 Claude 模型是高效使用的第一步。选错模型可能导致：

- 用昂贵的 Opus 处理简单任务 → **浪费成本**
- 用 Haiku 处理复杂推理 → **质量不达标**

本节提供一个实用的模型选择决策框架。

---

## 决策树：快速选择模型

```
开始
  │
  ├─ 任务是否需要最高质量的推理/创作？
  │   ├─ 是 → Claude 4.5 Opus
  │   └─ 否 ↓
  │
  ├─ 任务是否涉及复杂编程/Agent 构建？
  │   ├─ 是 → Claude 4.5 Sonnet
  │   └─ 否 ↓
  │
  ├─ 是否需要低延迟或批量处理？
  │   ├─ 是 → Claude 4.5 Haiku
  │   └─ 否 ↓
  │
  └─ 默认选择 → Claude 4.5 Sonnet
```

---

## 场景选型指南

### 场景 1：日常对话与写作

| 需求 | 推荐模型 | 原因 |
|------|---------|------|
| 简单问答 | Haiku | 快速响应，成本低 |
| 邮件撰写 | Haiku/Sonnet | 无需复杂推理 |
| 长文创作（文章、报告） | Sonnet | 平衡质量与速度 |
| 高质量营销文案 | Opus | 需要创意和精细措辞 |

---

### 场景 2：编程与技术任务

| 需求 | 推荐模型 | 原因 |
|------|---------|------|
| 代码补全/简单函数 | Haiku | 足够处理日常编码 |
| 完整功能实现 | Sonnet | 代码能力强，性价比高 |
| 复杂系统设计/重构 | Opus | 需要深度架构思考 |
| Agentic Coding（自主编程） | Sonnet/Opus | 需要多步骤推理 |

---

### 场景 3：文档处理

| 需求 | 推荐模型 | 原因 |
|------|---------|------|
| 短文档摘要 | Haiku | 简单任务 |
| 长文档（>50页）分析 | Sonnet | 长上下文处理能力 |
| 合同审查/法律文件 | Opus | 需要精确理解和推理 |
| PDF/图像中的文字提取 | Sonnet | 视觉能力+文本理解 |

---

### 场景 4：Agent 与自动化

| 需求 | 推荐模型 | 原因 |
|------|---------|------|
| 简单工具调用 | Haiku | 成本敏感场景 |
| 多工具编排 | Sonnet | 平衡推理与成本 |
| Computer Use | Sonnet/Opus | 需要视觉理解和决策 |
| 复杂 Agent（多步推理） | Opus | 最强推理能力 |

---

## 成本计算示例

假设每月处理 100 万 Token（输入+输出），不同模型的成本对比：

| 模型 | 每百万 Token 估价* | 月成本估算 |
|------|-------------------|-----------|
| Claude 4.5 Haiku | ~$1 | ~$1 |
| Claude 4.5 Sonnet | ~$5 | ~$5 |
| Claude 4.5 Opus | ~$25 | ~$25 |

*价格为示意，实际以 Anthropic 官网定价为准。

**成本优化建议**：
1. 先用 Haiku 处理，质量不够再升级
2. 使用 Prompt Caching 减少重复计算
3. 精简 System Prompt，减少 Token 消耗

---

## 混合策略

实际项目中，通常采用混合策略：

```
┌─────────────────────────────────────────────────────┐
│                  混合模型架构                       │
├─────────────────────────────────────────────────────┤
│                                                     │
│   用户请求                                          │
│       ↓                                             │
│   ┌─────────────┐                                   │
│   │ 路由层      │  判断任务复杂度                    │
│   └─────────────┘                                   │
│       ↓           ↓           ↓                     │
│   ┌────────┐  ┌────────┐  ┌────────┐               │
│   │ Haiku  │  │ Sonnet │  │ Opus   │               │
│   │ 简单   │  │ 中等   │  │ 复杂   │               │
│   └────────┘  └────────┘  └────────┘               │
│       ↓           ↓           ↓                     │
│   └───────────────┴───────────────┘                 │
│                   ↓                                 │
│              返回结果                               │
└─────────────────────────────────────────────────────┘
```

**路由判断依据**：
- Token 数量
- 任务类型关键词
- 历史质量反馈

---

## 模型切换注意事项

不同模型之间切换时，注意以下差异：

| 方面 | 注意事项 |
|------|---------|
| 提示词兼容性 | 为某个模型优化的提示词可能需要调整 |
| 输出风格 | Opus 通常更详细，Haiku 更简洁 |
| 工具调用格式 | 格式一致，但推理方式略有差异 |
| 错误处理 | 能力较弱的模型更容易产生幻觉 |

---

## 实践建议

1. **从 Sonnet 开始**：它是大多数场景的安全选择
2. **建立评估标准**：定义什么是"足够好"的输出
3. **A/B 测试**：对同一任务测试多个模型
4. **监控成本**：使用 Token 计数 API 追踪消耗
5. **定期评估**：新模型发布后重新评估选型决策

---

## 小结

- 模型选择取决于**任务复杂度、质量要求、成本预算**
- **Sonnet** 是大多数场景的首选
- **Haiku** 适合简单任务和批量处理
- **Opus** 用于需要最高质量的关键任务
- 生产环境建议采用**混合策略**

---

恭喜你完成第一章！你已经掌握了 Claude 的基础知识。接下来，我们将进入实战环节，学习如何通过提示工程与 Claude 高效沟通。

**[继续阅读：第二章 提示工程核心技术 →](../02_prompt/README.md)**
